<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Les Sagas MP3</title>

	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/moon.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/monokai.css">

	<link rel="stylesheet" href="css/presentation.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<h1>Les Sagas MP3</h1>
				<h2>Une illustration de la culture DevOps</h2>
			</section>
			<section>
				<section>
					<h2>Connaissez-vous... ?</h2>
				</section>
				<section>
					<audio preload controls src="audio/extrait-donjon-de-naheulbeuk.mp3">
					</audio>
					<p class="fragment"><img src="images/sagas/naheulbeuk.jpg" height="400px" /></p>
					<p><em class="fragment"><strong>Le Donjon de Naheulbeuk</strong>, créé par <a
								href="http://penofchaos.com/">John Lang (AKA Pen of Chaos)</a> en 2001</em></p>
					<aside class="notes">
						<p>Le Donjon de Naheulbeuk, une saga audio créée en 2001 par John Lang, diffusée gratuitement
							sur internet.</p>
						<p>2 saisons audio et plusieurs bonus, des livres, des jeux, un groupe de musique...</p>
					</aside>
				</section>
				<section>
					<audio preload controls src="audio/extrait-eden.mp3">
					</audio>
					<p class="fragment"><img src="images/sagas/eden.jpg" height="400px" /></p>
					<em class="fragment"><strong>Eden</strong>, créé par <a
							href="https://twitter.com/Antoine_Rouaud">Antoine Rouaud</a> en 2006</em>
					<aside class="notes">
						<p>Créée entre 2006 et 2009 par Antoine Rouaud, Eden est un genre de space opéra audio</p>
						<p>3 saisons et une suite entre 2012 et 2013 : Eden Sacrifice</p>
					</aside>
				</section>
				<section>
					<audio preload controls src="audio/extrait-bat-man.mp3">
					</audio>
					<p class="fragment"><img src="images/sagas/bat-man.jpg" height="400px" /></p>
					<em class="fragment"><strong>Bat-man</strong>, créé par <a
							href="https://twitter.com/Johnnypigeon">Johnny</a> et <a
							href="https://twitter.com/RanneMadsen">Ranne Madsen</a> en 2019</em>
					<aside class="notes">
						<p>Créée entre 2019 par Johnny, Ranne Madsen</p>
					</aside>
				</section>
			</section>
			<section>
				<section>
					<h2>Le point commun entre ces sagas ?</h2>
				</section>
				<section>
					<img src="images/netophonix/logo.jpg" />
					<aside class="notes">
						<p>Communauté de créateurs et de passionnés</p>
						<p>Depuis 2000</p>
						<p>1080 sagas répertoriées</p>
					</aside>
				</section>
				<section>
					<img src="images/netophonix/liste.png" />
				</section>
				<section>
					<img src="images/netophonix/liste-mobile.png" height="600px" />
					<aside class="notes">
						<p>Web des années 2000</p>
						<ul>
							<li>Mise en forme tableau</li>
							<li>Pas de responsive</li>
							<li>Pas d'API</li>
						</ul>
					</aside>
				</section>
				<section>
					<h3>Mes besoins</h3>
					<ul>
						<li class="fragment">Utiliser mon smartphone pour suivre mes sagas</li>
						<li class="fragment">Accéder sur une même interface à toutes les informations des sagas</li>
						<li class="fragment">Recevoir des notifications lorsque de nouveaux épisodes sont disponibles
						</li>
						<li class="fragment">Pouvoir écouter et/ou télécharger les épisodes</li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h2>Les données à manipuler</h2>
				</section>
				<section>
					<h3>Typologies et sources de données</h3>
					<ul>
						<li class="fragment" data-fragment-index="1">Les sagas et leurs métadonnées (auteur, genre,
							synopsis, etc.)</li>
						<small class="fragment" data-fragment-index="5">↪ Liste des sagas Netophonix</small>
						<li class="fragment" data-fragment-index="2">Les saisons, épisodes et images</li>
						<small class="fragment" data-fragment-index="6">↪ Archive de Clator</small>
						<li class="fragment" data-fragment-index="3">Les actualités (nouvelles sagas, nouveaux épisodes,
							castings, etc.)</li>
						<small class="fragment" data-fragment-index="7">↪ Flux RSS du forum Netophonix</small>
						<li class="fragment" data-fragment-index="4">Les favoris</li>
						<small class="fragment" data-fragment-index="8">↪ Propres à l'application</small>
					</ul>
					<aside class="notes">
						<p>Les sagas et leurs métadonnées : distribution des rôles, site web du projet...</p>
					</aside>
				</section>
				<section data-background-opacity="0.5">
					<img src="images/schemas/sources-donnees.drawio.png" />
					<aside class="notes">
						<p><a href="https://app.diagrams.net/#G1XNHEUIQINpKY-KfhNHDFEsKaN1La3bi2">Editer le schéma</a></p>
					</aside>
				</section>
				<section data-background-opacity="0.5">
					<h3>Vers la centralisation des données</h3>
					<ul>
						<li class="fragment">Données des sources externes complexes à isoler</li>
						<li class="fragment">Peu de mises à jour sur les sources externes (1 fois par jour maximum)</li>
						<li class="fragment">Dépendance à un service externe</li>
					</ul>
					<aside class="notes">
						<p>Scraping HTML du tableau des sagas et lecture des PDFs de l'archive complexe</p>
						<p>La communauté est au courant de la réutilisation de ces données (légal)</p>
					</aside>
				</section>
				<section data-background-opacity="0.5">
					<img class="r-stretch no-border" src="images/schemas/centralisation-donnees.drawio.png" />
				</section>
				<aside class="notes">
					<p><a href="https://app.diagrams.net/#G1VKxISMQ8JSxlCQauVBiVoMyudoGArDWZ">Editer le schéma</a></p>
					<p>Les flèches sont inversées pour visualiser où vont les données</p>
				</aside>
			</section>
			<section>
				<section>
					<h2>Gestion de la structure de données</h2>
				</section>
				<section>
					<h3>Késako ?</h3>
					<ul>
						<li class="fragment">Base de données relationnelle (PostgreSQL) décrite en SQL</li>
						<li class="fragment">Chaque version du backend s'attend à avoir une structure de données propre
							à elle-même</li>
						<li class="fragment">La structure de la base de données doit pouvoir évoluer avec les versions
							du backend</li>
					</ul>
					<aside class="notes">
						<p>Structure de données = façon de ranger les données</p>
						<p>Exemple : dans une nouvelle version du backend, on récupère une nouvelle données depuis
							Netophonix. La base doit donc évoluer pour accueillir cette nouvelle donnée.</p>
					</aside>
				</section>
				<section>
					<img src="images/logos/liquibase.png" />
				</section>
				<section>
					<h3>Liquibase à la rescousse</h3>
					<ul>
						<li>Lors de son démarrage, le backend fait appel à la bibliothèque Liquibase
						</li>
						<li>Liquibase exécute en base de données les scripts SQL qui lui sont fournis
						</li>
						<li>Si un script SQL a déjà été exécuté auparavant (dans une précédente version du
							backend par exemple), il est ignoré</li>
					</ul>
				</section>
				<section>
					<h3>Liquibase à la rescousse</h3>
					<pre><code data-trim>
--liquibase formatted sql

--backend-version:1.0
--changeset lessagasmp3:create-table-saga
CREATE TABLE IF NOT EXISTS saga (
    id bigint primary key,
    synopsis text,
    title character varying(255)
);
--rollback drop table saga;

--backend-version:1.1
--changeset lessagasmp3:add-saga-status
ALTER TABLE saga ADD status character varying(255);
--rollback alter table saga drop column status;

					</code></pre>
				</section>
			</section>
			<section>
				<section>
					<h2>Scraping du tableau Netophonix</h2>
				</section>
				<section data-background-opacity="0.5">
					<img class="r-stretch" src="images/netophonix/liste.png" />
				</section>
				<section data-background-opacity="0.5">
					<pre><code data-trim>
&#60;tr class="row1"&#62; 
  &#60;td class="gen medpad" align="center"&#62;
    &#60;span id="808"&#62;&nbsp;16&nbsp;&#60;/span&#62;
  &#60;/td&#62;
  &#60;td class="genmed medpad" align="left"&#62;
    &#60;a href="https://aghostslife.jimdofree.com" class="topictitle" target="_blank" style="float: left; display: block; padding-top: 4px; padding-left: 4px;"&#62;  A Ghost's Life &#60;/a&#62; 
    &#60;a href="http://wiki.netophonix.com/A%20Ghost%27s%20Life" style="float: right; padding-top: 4px;"&#62;
      &#60;img border="0" title="Plus d'infos sur le Netowiki" alt="Plus d'infos sur le Netowiki" src="./images/wikilink.gif"/&#62;
    &#60;/a&#62;
  &#60;/td&#62;
  &#60;/td&#62;
  &#60;td class="genmed medpad" align="center" valign="middle"&#62;&#60;span class="gen"&#62;Sarausa&#60;/span&#62;&#60;/td&#62;
  &#60;td class="genmed medpad" align="center" valign="middle"&#62;&#60;span class="gensmall"&#62;Fantastique&#60;/span&#62;&#60;/td&#62;
  &#60;td class="gennotetab" align="center" valign="top" width="15"&#62;
    &#60;span class="gennotetab"&#62;
      &#60;img align="top" valign="middle" border="0" alt="Niveau artistique en jaune et niveau technique en bleu." title="Niveau artistique en jaune et niveau technique en bleu" src="images/jaugeslist.php?art=171&tech=167"&#62;
      &#60;td class="genmed medpad" align="center" valign="middle"&#62;
        &#60;span class="gensmall"&#62;
          &#60;a href="./saga_avis.php?saga_id=808&amp;notes_usid=808&amp;critview=1&amp;startlist=0&amp;saga_seek=&amp;orderlist=ASC&amp;modelist=titres"&#62;12 avis&#60;/a&#62;
        &#60;/span&#62;
      &#60;/td&#62;
    &#60;/span&#62;
  &#60;/td&#62;
  &#60;td class="genmed medpad" align="center" valign="middle"&#62;
    &#60;span class="gensmall"&#62;104&#60;/span&#62;
  &#60;/td&#62;
&#60;/tr&#62;
</code></pre>
				</section>
				<section data-background-opacity="0.5">
					<h3>Comment procéder ?</h3>
					<ul>
						<li class="fragment">Téléchargement du code HTML fourni par la page du tableau des sagas
							Netophonix</li>
						<li class="fragment">Pour chaque ligne <code>&#60;tr&#62;</code> du tableau, on créé / met à
							jour une saga dans la BDD</li>
						<li class="fragment">Parcours de la structure du DOM avec la bibliothèque <a
								href="https://htmlunit.sourceforge.io/">HtmlUnit</a></li>
					</ul>
					<aside class="notes">
						<p>Scraping HTML du tableau des sagas et lecture des PDFs de l'archive complexe</p>
						<p>La communauté est au courant de la réutilisation de ces données</p>
					</aside>
				</section>
			</section>
			<section>
				<section>
					<h2>Lecture de l'archive de Clator</h2>
				</section>
				<section data-background-opacity="0.5">
					<img class="r-stretch" src="images/archive-clator/lepervier.png" />
				</section>
				<section data-background-opacity="0.5">
					<h3>Comment procéder ?</h3>
					<ol>
						<li class="fragment">Ouverture du fichier et extraction du contenu sous forme de tableau de
							lignes de texte</li>
						<li class="fragment">Récupération des données dans l'ordre d'apparition dans le PDF (ligne 1 =
							auteur, ligne 2 = musique, etc.)</li>
						<li class="fragment">Inconvénient notable : si un fichier est mal formaté, les mauvaises données
							peuvent être importées</li>
						<li class="fragment">Extraction des lignes de texte via la bibliothèque <a
								href="https://pdfbox.apache.org/">Apache PDFBox®</a></li>
					</ol>
				</section>
			</section>
			<section>
				<section>
					<h2>Scraping du flux XML</h2>
				</section>
				<section data-background-opacity="0.5">
					<img class="r-stretch" src="images/netophonix/forum.png" />
				</section>
				<section data-background-opacity="0.5">
					<img class="r-stretch" src="images/pictos/phpBB.png" />
					<aside class="notes">
						<p>Le forum Netophonix dispose du module phpBB Smartfeed exposant un flux XML</p>
						<p>Les donnnées du flux sont paramétrables via son URL</p>
					</aside>
				</section>
				<section data-background-opacity="0.5">
					<h3>Comment procéder ?</h3>
					<ul>
						<li>Le forum Netophonix dispose du module phpBB Smartfeed exposant un flux XML
						</li>
						<li>Les donnnées envoyées dans le flux sont paramétrables via son URL</li>
					</ul>
					<blockquote>
						https://forum.netophonix.com/smartfeed.php?<b><span color="yellow">forum=1</span></b>&firstpostonly=1&limit=NO_LIMIT&<b><span color="yellow">sort_by=postdate_desc</span></b>&feed_type=RSS2.0&feed_style=HTMLSAFE
					</blockquote>
				</section>
				<section data-background-opacity="0.5">
					<pre><code data-trim>
&#60;item&#62;
  &#60;title&#62;Nouveautés :: Network Evil 6 - Arc Chris &amp; Pims - Chapitre IV :: Auteur Kwaam&#60;/title&#62;
  &#60;link&#62;https://forum.netophonix.com:443/viewtopic.php?f=1&amp;t=18929&amp;p=228153#p228153&#60;/link&#62;
  &#60;description&#62;&#60;![CDATA[Bonjour à tous !Bonjour à tous !On est à l’avant dernier chapitre du périple de Chris & Pims ! Accrochez vous bien parce que ce chapitre vous réserve bien des surprises avec la course poursuite d’Abba qui n’en finit plus. Et que dire pour le prochain et dernier chapitre… Soyez prêt ! Bonne écoute !Après leur rencontre avec Abba, Chris & Pims l&#39;ont poursuivie jusqu&#39;à atteindre un porte avion qui serait sa base d&#39;opération.Spotify : https://open.spotify.com/show/1I6CHnQoMTfAYvWeDUCMdeDeezer : https://deezer.com/show/3889637Apple Podcasts : https://podcasts.apple.com/us/podcast/n ... 1635379871Youtube : https://www.youtube.com/playlist?list=P ... WkO_tRtB28Podcloud : https://podcloud.fr/podcast/network-evil-6Google Podcasts : https://podcasts.google.com/feed/aHR0cH ... Nhc3QvbmU2Page de la série : https://www.wavesavengers.fr/creations- ... /episodes/Flux RSS de l’émission : https://www.wavesavengers.fr/feed/podcast/ne6DISTRIBUTION : https://www.wavesavengers.fr/creations- ... tribution/]]&#62;&#60;/description&#62;
  &#60;author&#62;no_email@example.com (Kwaam)&#60;/author&#62;
  &#60;category&#62;Nouveautés&#60;/category&#62;
  &#60;comments&#62;https://forum.netophonix.com:443/posting.php?mode=reply&amp;f=1&amp;t=18929&#60;/comments&#62;
  &#60;pubDate&#62;Wed, 09 Nov 2022 23:43:58 GMT&#60;/pubDate&#62;
  &#60;guid isPermaLink="false"&#62;https://forum.netophonix.com:443/viewtopic.php?f=1&amp;t=18929&amp;p=228153#p228153&#60;/guid&#62;
&#60;/item&#62;
</code></pre>
				</section>
				<section data-background-opacity="0.5">
					<h3>Comment procéder ?</h3>
					<ul>
						<li>Même principe que pour le scraping du tableau des sagas</li>
						<li>Extraction du contenu via la bibliothèque <a
								href="https://www.oracle.com/java/technologies/jaxp-introduction.html">Java API for XML
								Processing (JAXP)</a></li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h2>Exposition des données par API</h2>
				</section>
				<section>
					<h3>Définition et utilité d'une API</h3>
					<ul>
						<li class="fragment">API : Application Programming Interface (= Interface de Programmation
							Applicative en français)</li>
						<li class="fragment">Permet d'accéder aux fonctions ou aux données d'une application à distance
						</li>
						<li class="fragment">Standard dans les années actuelles</li>
					</ul>
				</section>
				<section>
					<h3>Usage de notre API</h3>
					<p>Un appel à l'URL suivante :</p>
					<em><a
							href="https://api.les-sagas-mp3.fr/api/saga?offset=0&limit=10">https://api.les-sagas-mp3.fr/api/saga?offset=0&limit=10</a></em>
					<pre class="fragment"><code data-trim>{
  "content": [
    {
      "id": 563,
      "title": "1287"
    },
    {
      "id": 570,
      "title": "14.92",
    },
    [...]
  ],
  "totalPages": 108,
  "totalElements": 1077,
  "number": 0,
  "size": 10,
  "numberOfElements": 10,
  "sort": {
    "sorted": true,
    "unsorted": false,
    "empty": false
  }
}</code></pre>
					<aside class="notes">
						<p>Dans l'exemple, on lit des données en BDD, mais il est aussi possible d'écrire des données
						</p>
					</aside>
				</section>
				<section data-background-opacity="0.5">
					<img  class="r-stretch no-border" src="images/schemas/api.drawio.png" />
					<aside class="notes">
						<p><a href="https://app.diagrams.net/#G1VPJYxg2IU6ssOlZ2uCvpk7XVEGSPExdC">Editer le schéma</a></p>
					</aside>
				</section>
				<section>
					<h3>Mais les gens, ils ne vont pas lire/écrire du JSON ?</h3>
					<ul>
						<li class="fragment">Ils devraient <span class="fragment"> - Nan, je déconne</span></li>
						<li class="fragment">La mise en forme des données à l'affichage est déléguée à un autre
							composant : le "frontend"</li>
					</ul>
					<blockquote class="fragment">
						Dans notre cas, on veut pouvoir accéder aux données par 2 moyens : un site web 🖥️ et une application Android📱. Ce sont donc <b>2 composants différents</b> qui devront se connecter à l'API.
					</blockquote>
				</section>
			</section>
			<section>
				<section>
					<h2>Une interface web et Android</h2>
				</section>
				<section>
					<h3>Deux technologies complètement différentes</h3>
					<ul>
						<li class="fragment">Un site web : ensemble de fichiers HTML, JS, CSS interprétés par un
							navigateur</li>
						<li class="fragment">Une application Android : exécutable fonctionnant avec l'Android Runtime
							(ART) spécifique à la plateforme</li>
						<li class="fragment">On veut vraiment maintenir ces 2 applications en parallèle ?</li>
						<li class="fragment">La question est vite répondue : NON</li>
					</ul>
				</section>
				<section>
					<img class="no-border" src="images/logos/ionic.png" />
				</section>
				<section>
					<h3>Ionic, un framework pour les générer toutes</h3>
					<ul>
						<li>Génère des applications compatibles sur différentes plateformes : Web,
							Desktop, Android, iOS</li>
						<li>Un projet Ionic peut s'écrire en Angular, React ou Vue</li>
						<li>Ionic propose un large choix de composants prêts à l'emploi : menu de
							navigation, boutons flottants, listes, etc.</li>
					</ul>
				</section>
				<section>
					<h3>Ionic pour notre usage</h3>
					<img class="fragment" src="images/les-sagas-mp3/liste.png" />
					<img class="fragment" src="images/les-sagas-mp3/vue-saga.png" />
				</section>
				<section data-background-opacity="0.5">
					<img class="r-stretch no-border" src="images/schemas/frontend.drawio.png" />
					<aside class="notes">
						<p><a href="https://app.diagrams.net/#G1gOlkQqM5xp5bjFKUhSD2owf1bbnbJHFd">Editer le schéma</a></p>
					</aside>
				</section>
			</section>
			<section>
				<section>
					<h2>Ca marche sur mon poste. Et maintenant ?</h2>
				</section>
				<section>
					<h3>Les limites de mon ordinateur</h3>
					<ul>
						<li class="fragment">Inaccessible depuis internet</li>
						<li class="fragment">On utilise le nom de domaine <b>localhost</b> et non
							<b>les-sagas-mp3.fr</b>
						</li>
						<li class="fragment">Pas disponible 24/7. <em>J'éteins mon ordinateur quand je ne m'en sers
								pas...</em></li>
					</ul>
				</section>
				<section>
					<h3>La solution : utiliser un serveur</h3>
					<p>Un <strong>serveur</strong> est un ordinateur distant. A nous de le configurer pour qu'il réponde
						à nos besoins :</p>
					<ul>
						<li class="fragment">Allocation d'une IP publique <b>x.x.x.x</b></li>
						<li class="fragment">Pointage de notre nom de domaine <b>les-sagas-mp3.fr</b> vers son
							IP publique</li>
						<li class="fragment">Installation de nos composants API et App pour les rendre disponibles</li>
					</ul>
				</section>
				<section data-background-opacity="0.5">
					<img class="r-stretch no-border" src="images/schemas/serveur.drawio.png" />
					<aside class="notes">
						<p><a href="https://app.diagrams.net/#G11OsPj1SYt-Lam6RNFOEILlnYrjC5tmB6">Editer le schéma</a></p>
					</aside>
				</section>
				<section>
					<h3>Et pourquoi pas plusieurs serveurs ?</h3>
					<ul>
						<li>Environnement de <b color="red">production</b> : utilisé par les utilisateurs finaux</li>
						<li>Environnements de <b color="green">test</b> : utilisé par les développeurs, testeurs...</li>
					</ul>
				</section>
				<section data-background-opacity="0.5">
					<img class="r-stretch no-border" src="images/schemas/serveurs.drawio.png" />
					<aside class="notes">
						<p><a href="https://app.diagrams.net/#G1mD3bUv1ga-qYLEsQKWz9LZi1N_96wRi5">Editer le schéma</a></p>
					</aside>
				</section>
				<section>
					<h3>Quel type de serveur ?</h3>
					<blockquote>Des serveurs permettant d'héberger une application web, une
						application Java et une base de données PostgreSQL</blockquote>
					<p class="fragment"><strong color="red">PROBLEME</strong> : ça n'existe pas sur étagère.</p>
					<p class="fragment"><strong color="green">SOLUTION</strong> : créer notre propre infrastructure dans le Cloud</p>
				</section>
			</section>
			<section>
				<section>
					<h2>Naufrage dans le Cloud</h2>
				</section>
				<section>
					<h3>Création du serveur</h3>
					<p>Dans le Cloud, il n'y a pas <em>que</em> un serveur à créer</p>
					<ul>
						<li class="fragment">Un réseau VPC</li>
						<li class="fragment">Un sous-réseau</li>
						<li class="fragment">Les règles de pare-feu</li>
						<li class="fragment">Une instance de machine virtuelle avec un disque persistant</li>
						<li class="fragment">Une IP publique</li>
						<li class="fragment">Les entrées DNS api*.les-sagas-mp3.fr et app*.les-sagas-mp3.fr</li>
						<li class="fragment">Un bucket de stockage de fichiers</li>
					</ul>
				</section>
				<section>
					<h3>Comment on procède ?</h3>
					<p>Pour chacun de ces éléments, un formulaire à saisir dans la console du fournisseur de Cloud</p>
					<p>Les manipulations sont à répéter <strong>autant de fois</strong> qu'il y a d'environnements de
						test ou de production</p>
					<blockquote class="fragment">➕ il y a d'opérations manuelles<br />➕ il y a de risques d'erreurs
					</blockquote>
				</section>
				<section>
					<h3>Et si on automatisait tout ça ?</h3>
					<img class="fragment no-border" src="images/logos/terraform.png" height="100px" />
					<ol>
						<li class="fragment">On décrit les ressources que l'on souhaite obtenir dans un format
							compréhensible par Terraform</li>
						<li class="fragment">Terraform va se connecter au fournisseur de Cloud souhaité (Amazon, Google,
							Microsoft...)</li>
						<li class="fragment">Terraform va comparer l'existant avec l'état souhaité et appliquer les
							changements</li>
					</ol>
				</section>
				<section>
					<h3>Et si on automatisait tout ça ?</h3>
					<img class="no-border" src="images/logos/terraform.png" height="100px" />
					<pre><code data-trim>resource "google_dns_record_set" "dns" {
  project      = "les-sagas-mp3"
  name         = "app.les-sagas-mp3.fr"
  type         = "A"
  ttl          = 300
  rrdatas      = [34.163.30.76]
}</code></pre>
				</section>
				<section>
					<h3>La machine virtuelle est une coquille vide</h3>
					<p>Une fois créé, le serveur est vide. Il faut encore installer et configurer :</p>
					<ul>
						<li class="fragment">Une base de données PostgreSQL</li>
						<li class="fragment">Java</li>
						<li class="fragment">Un serveur web (Nginx en l'occurrence)</li>
						<li class="fragment">Nos composants API et App</li>
						<li class="fragment">L'exposition HTTPS</li>
					</ul>
				</section>
				<section>
					<h3>Et si on automatisait tout ça ?</h3>
					<img class="fragment no-border" src="images/logos/ansible.png" height="100px" />
					<ol>
						<li class="fragment">On décrit l'état que l'on souhaite donner au serveur dans un format
							compréhensible par Ansible</li>
						<li class="fragment">Ansible va se connecter à la machine créée par Terraform grace à son IP
							publique</li>
						<li class="fragment">Ansible va comparer l'existant avec l'état souhaité et appliquer les
							changements</li>
					</ol>
					<blockquote class="fragment">✅ C'est le même principe que Terraform</blockquote>
				</section>
				<section>
					<h3>Et si on automatisait tout ça ?</h3>
					<img class="no-border" src="images/logos/ansible.png" height="100px" />
					<pre><code data-trim>- name: Download Java binaries
  get_url:
    url: "https://download.java.net/java/GA/jdk19.0.1/afdd2e245b014143b62ccb916125e3ce/10/GPL/openjdk-19.0.1_linux-x64_bin.tar.gz"
    dest: "/tmp/openjdk.tar.gz"
    checksum: "7a466882c7adfa369319fe4adeb197ee5d7f79e75d641e9ef94abee1fc22b1fa"</code></pre>
				</section>
				<section>
					<h3>Et si on automatisait l'automatisation ?</h3>
					<div class="r-stack">
						<img class="fragment" src="images/gifs/mind-blow-galaxy.gif" height="300px" />
					</div>
				</section>
				<section>
					<h3>Oui, il en reste des choses à automatiser !</h3>
					<ul>
						<li class="fragment">Les commandes Terraform et Ansible exécutées la main depuis son poste...
						</li>
						<li class="fragment">pour chacun des environnements dont on a besoin ...</li>
						<li class="fragment">avec à chaque fois, la configuration à adapter au contexte...</li>
						<li class="fragment">et la source de nos composants API et APP qui proviennent toujours du poste
							de développement</li>
					</ul>
					<aside class="notes">
						<p>Le principal enjeu : permettre à des nouveaux développeurs d'intégrer facilement le projet.
						</p>
					</aside>
				</section>
			</section>
			<section>
				<section>
					<h2>Here comes the CI/CD</h2>
				</section>
				<section>
					<h3>Travailler à plusieurs</h3>
					<p>Quand plusieurs développeurs travaillent chacun de leur côté, comment faire pour se synchroniser
						?</p>
					<ul>
						<li class="fragment">On copie les fichiers sur une clé USB</li>
						<li class="fragment">On s'envoit les fichiers par mail</li>
						<li class="fragment">On dépose ses fichiers sur un Drive</li>
						<li class="fragment">On utilise un logiciel de gestion de versions</li>
					</ul>
					<p class="fragment">Aujourd'hui, le logiciel le plus répandu est <strong>Git</strong>.
						<strong>GitHub</strong> est une plateforme qui héberge des dépôts git.</p>
				</section>
				<section>
					<h3>GitHub et les Pull Requests</h3>
					<blockquote class="fragment">Une pull request (demande de tirage) simule la fusion de 2 versions de
						code source</blockquote>
					<p class="fragment">Sur cette simulation, les participants peuvent :</p>
					<ul>
						<li class="fragment">📝 <strong>reparcourir</strong> l'ensemble des changements</li>
						<li class="fragment">🪶 <strong>annoter</strong> des lignes, <strong>proposer</strong> des
							améliorations</li>
						<li class="fragment">✔️ effectuer des <strong>traitements</strong> automatiques sur le code
							fusionné</li>
					</ul>
					<p class="fragment">Tant que la pull request n'est pas validée, la version de production reste
						intacte</p>
					<aside class="notes">
						<p>Ce mécanisme permet dans à tout un chacun de proposer des modifications sur un logiciel
							open-source</p>
					</aside>
				</section>
				<section>
					<h3>Les traitements automatiques d'une PR</h3>
					<ul>
						<li class="fragment">⚙️ la compilation du code</li>
						<li class="fragment">✅ des tests automatisés</li>
						<li class="fragment">🚚 le dépôt du livrable dans un répertoire de stockage</li>
						<li class="fragment">🚩 la création d'un nouveau serveur dédié à la version en cours de test
							(CD)</li>
						<small class="fragment">↪ Avec l'outillage Terraform et Ansible vu précédemment</small>
					</ul>
				</section>
				<section>
					<h3>En résumé</h3>
					<ul>
						<li class="fragment"><strong>CI (Continuous Integration)</strong> : teste et compile les
							composants API
							et APP et archive les résultats dans un répertoire accessible de la CD</li>
						<li class="fragment"><strong>CD (Continuous Deployment)</strong> : s'assure du bon
							fonctionnement de l'infrastructure cible et installe les composants fournis par la CI</li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h2>Conclusion</h2>
				</section>
				<section>
					<h3>Un long projet qui a beaucoup évolué</h3>
					<ul>
						<li class="fragment">Différents essais à plusieurs niveaux : outils de développement, méthodes
							de travail, hébergeurs...</li>
						<li class="fragment">Un fil rouge pour faire de la veille et se former</li>
						<li class="fragment">Une nouvelle perspective pour la communauté Netophonix</li>
					</ul>
				</section>
				<section>
					<h3>Et le DevOps dans tout ça ?</h3>
					<ul>
						<li class="fragment">Migrer des données de façon flexible</li>
						<li class="fragment">Exposer nos données de façon standard via un contrat de service</li>
						<li class="fragment">Proposer un support mobile et web</li>
						<li class="fragment">Maîtriser les environnements de production et de test</li>
						<li class="fragment">Permettre de travailler à plusieurs en autonomie</li>
						<li class="fragment">Formaliser des validations manuelles et automatiques des changements</li>
					</ul>
				</section>
				<section>
					<h3>Et le DevOps dans tout ça ?</h3>
					<blockquote>Le DevOps n'est pas un rôle mais une <strong>culture</strong>.
					</blockquote>
					<aside class="notes">
						<p>Les processus et outils présentés ne sont que des exemples.</p>
						<p>Un DevOps est un mouton à 5 pattes. Formons les développeurs, les admins systèmes.</p>
						<p>Dans un processus d'amélioration continue => bien avec l'agilité</p>
					</aside>
				</section>
				<section>
					<h3>La suite ?</h3>
					<img class="no-border" src="images/logos/github.png" height="50px" />
					<p>L'intégralité du projet est disponible à l'adresse : 
						<a href="https://github.com/Les-Sagas-MP3">github.com/les-sagas-mp3</a>
					</p>
					<img class="no-border" src="images/logos/twitch.png" height="50px" />
					<p>On développe le projet ensemble sur Twitch :
						<a href="https://twitch.tv/titohma">twitch.tv/titohma</a>
					</p>
				</section>
				<section>
					<h1>Merci</h1>
					<p>Les extraits audio et des illustrations appartiennent à leurs propriétaire respectifs (voir les slides
						correspondantes)</p>
					<p>Tout le reste est sous licence <a
							href="https://github.com/Les-Sagas-MP3/presentation/blob/main/LICENSE">GNU Affero General
							Public License</a></p>
					<img class="no-border" src="images/logos/agplv3.png" />
				</section>
			</section>
		</div>
	</div>
	<script src="js/reveal.js"></script>
	<script src="plugin/highlight/highlight.min.js"></script>
	<script src="plugin/notes/notes.js"></script>
	<script>
		Reveal.initialize({
			hash: true,
			slideNumber: "c/t",
			plugins: [RevealNotes, RevealHighlight],
			dependencies: [
				{ src: 'plugin/markdown/marked.js' },
				{ src: 'plugin/markdown/markdown.js' },
				{ src: 'plugin/highlight/highlight.min.js' },
				{ src: 'plugin/notes/notes.js', async: true }
			]
		});
	</script>
</body>

</html>